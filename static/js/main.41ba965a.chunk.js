(this.webpackJsonpnewfrontend=this.webpackJsonpnewfrontend||[]).push([[0],{184:function(e,t,a){e.exports=a.p+"static/media/hey_mingle.836efd55.png"},196:function(e,t,a){e.exports=a(375)},201:function(e,t,a){},372:function(e,t,a){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),c=a.n(s),o=(a(201),a(10)),l=a(81),i=a(9),u=a(13),m=a(12),p=a(22),d=a(30),h=a(14),f=a(41),g=a.n(f),b=function(e,t){return{type:"AUTH_SUCCESS",token:t,username:e}},E=function(e){return{type:"AUTH_FAIL",error:e}},v=function(){return localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},k=function(e){return function(t){setTimeout((function(){t(v())}),1e4*e)}},N=function(e,t){return function(a){a({type:"AUTH_START"}),g.a.post("http://127.0.0.1:8000/rest-auth/login/",{username:e,password:t}).then((function(t){var n=t.data.key,r=new Date((new Date).getTime()+36e5);localStorage.setItem("token",n),localStorage.setItem("username",e),localStorage.setItem("expirationDate",r),a(b(e,n)),a(k(3600))})).catch((function(e){a(E(e))}))}},y=function(e,t,a,n){return function(r){r({type:"AUTH_START"}),g.a.post("http://127.0.0.1:8000/rest-auth/registration/",{username:e,email:t,password1:a,password2:n}).then((function(t){var a=t.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",a),localStorage.setItem("username",e),localStorage.setItem("expirationDate",n),r(b(e,a)),r(k(3600))})).catch((function(e){r(E(e))}))}},w=function(e,t){return function(a){g.a.defaults.headers={"Content-Type":"application/json",Authorization:"Token ".concat(t)},g.a.get("http://127.0.0.1:8000/chat/?username=".concat(e)).then((function(e){return a({type:"GET_CHATS_SUCCESS",chats:e.data})}))}},O=a(55),C=function(){function e(){Object(o.a)(this,e),this.callbacks={},this.socketRef=null}return Object(i.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(i.a)(e,[{key:"connect",value:function(e){var t=this,a="ws://localhost:8000/ws/chat/".concat(e,"/");console.log(a),this.socketRef=new WebSocket(a),this.socketRef.onopen=function(){console.log("websocket is open")},this.socketNewMessage(JSON.stringify({command:"fetch_messages"})),this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onerror=function(e){console.log(e.mesage)},this.socketRef.onclose=function(){console.log("websocket is closed"),t.connect()}}},{key:"disconnect",value:function(){this.socketRef.close(),this.socketRef.onclose=function(){console.log("socket is closed")}}},{key:"socketNewMessage",value:function(e){var t=JSON.parse(e),a=t.command;0!==Object.keys(this.callbacks).length&&("messages"===a&&this.callbacks[a](t.messages),"new_message"===a&&this.callbacks[a](t.message))}},{key:"fetchMessages",value:function(e,t){this.sendMessage({command:"fetch_messages",username:e,chatId:t})}},{key:"newChatMessage",value:function(e){this.sendMessage({command:"new_message",from:e.from,message:e.content,chatId:e.chatId})}},{key:"addCallbacks",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:"sendMessage",value:function(e){try{this.socketRef.send(JSON.stringify(Object(O.a)({},e)))}catch(t){console.log(t.mesasge)}}},{key:"state",value:function(){return this.socketRef.readyState}},{key:"waitForSocketConnection",value:function(e){var t=this.socketRef,a=this.waitForSocketConnection;setTimeout((function(){if(1===t.readyState)return console.log("Connection is secure"),void(null!=e&&e());console.log("Waiting for connection...."),a(e)}),1)}}]),e}();C.instance=null;var S=C.getInstance(),j=function(e){return e.children},_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={message:""},n.messageChangeHandler=function(e){n.setState({message:e.target.value})},n.sendMessageHandler=function(e){e.preventDefault();var t={from:n.props.username,content:n.state.message,chatId:n.props.match.params.chatID};S.newChatMessage(t),n.setState({message:""})},n.renderTimestamp=function(e){var t=Math.round(((new Date).getTime()-new Date(e).getTime())/6e4);return t<1?"just now...":t<60&&t>1?"".concat(t," minutes ago"):t<1440&&t>60?"".concat(Math.round(t/60)," hours ago"):t<44640&&t>1440?"".concat(Math.round(t/1440)," days ago"):"".concat(new Date(e))},n.renderMessages=function(e){var t=n.props.username;return e.map((function(e,a,s){return r.a.createElement("div",{key:e.id,className:e.author===t?"d-flex justify-content-end mb-4":"d-flex justify-content-start mb-4"},r.a.createElement("div",{className:"img_cont_msg"},r.a.createElement("img",{src:"http://emilcarlsson.se/assets/mikeross.png",className:"rounded-circle user_img_msg",alt:"user"})),r.a.createElement("div",{className:"msg_cotainer"},e.content,r.a.createElement("span",{className:"msg_time"},n.renderTimestamp(e.timestamp))))}))},n.initialiseChat(),n}return Object(i.a)(a,[{key:"initialiseChat",value:function(){var e=this;this.waitForSocketConnection((function(){S.fetchMessages(e.props.username,e.props.match.params.chatID)})),S.connect(this.props.match.params.chatID)}}]),Object(i.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.match.params.chatID!==e.match.params.chatID&&(S.disconnect(),this.waitForSocketConnection((function(){S.fetchMessages(t.props.username,e.match.params.chatID)})),S.connect(e.match.params.chatID))}},{key:"waitForSocketConnection",value:function(e){var t=this;setTimeout((function(){if(1===S.state())return console.log("Connection is made"),void e();console.log("wait for connection..."),t.waitForSocketConnection(e)}),100)}},{key:"render",value:function(){return r.a.createElement(j,null,r.a.createElement("div",{className:"card-body msg_card_body"},this.props.messages&&this.renderMessages(this.props.messages)),r.a.createElement("div",{className:"card-footer"},r.a.createElement("form",{onSubmit:this.sendMessageHandler},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text attach_btn"},r.a.createElement("i",{className:"fas fa-paperclip"}))),r.a.createElement("input",{onChange:this.messageChangeHandler,value:this.state.message,required:!0,className:"form-control type_msg",id:"chat-message-input",type:"text",placeholder:"Type your message..."}),r.a.createElement("div",{id:"chat-message-submit",className:"input-group-append"},r.a.createElement("span",{className:"input-group-text send_btn"},r.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"})))))))}}]),a}(r.a.Component),A=Object(p.b)((function(e){return{username:e.auth.username,messages:e.message.messages}}))(_),T=function(){var e=Object(h.g)().path;return r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"".concat(e,"/:chatID"),component:A}))};var P=function(e){var t=Object(h.g)().url;return r.a.createElement(d.c,{to:"".concat(t).concat(e.chatURL),style:{color:"#fff"}},r.a.createElement("li",{className:"active"},r.a.createElement("div",{className:"d-flex bd-highlight"},r.a.createElement("div",{className:"img_cont"},r.a.createElement("img",{src:e.picURL,alt:e.name,className:"rounded-circle user_img"}),r.a.createElement("span",{className:"".concat(e.status,"_icon")})),r.a.createElement("div",{className:"user_info"},r.a.createElement("span",null,e.name)))))},D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"waitForAuthDetails",value:function(){var e=this;setTimeout((function(){null===e.props.token||void 0===e.props.token?(console.log("waiting for auth details"),e.waitForAuthDetails()):e.props.getUserChats(e.props.username,e.props.token)}),100)}},{key:"componentDidMount",value:function(){this.waitForAuthDetails()}},{key:"openAddChatPopup",value:function(){this.props.addChat()}},{key:"render",value:function(){var e=this,t=this.props.chats.map((function(e){return r.a.createElement(P,{key:e.id,name:"".concat(e.name),status:"online",picURL:"http://emilcarlsson.se/assets/louislitt.png",chatURL:"/".concat(e.id)})}));return r.a.createElement("div",{className:"col-md-4 col-xl-3 chat"},r.a.createElement("div",{className:"card mb-sm-3 mb-md-0 contacts_card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",placeholder:"Search...",name:"",className:"form-control search"}),r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text search_btn"},r.a.createElement("i",{className:"fas fa-search"}))))),r.a.createElement("div",{className:"card-body contacts_body"},r.a.createElement("ul",{className:"contacts"},t)),r.a.createElement("div",{id:"card-footer"},r.a.createElement("button",{className:"d-flex justify-content-start btn-sm btn-danger",onClick:function(){return e.openAddChatPopup()}},r.a.createElement("i",{className:"fa fa-user-plus fa-fw","aria-hidden":"true"})," ",r.a.createElement("span",null,"Add Chat")))))}}]),a}(r.a.Component),x=Object(p.b)((function(e){return{token:e.auth.token,username:e.auth.username,chats:e.message.chats}}),(function(e){return{logout:function(){return e(v())},addChat:function(){return e({type:"OPEN_ADD_CHAT_POPUP"})},getUserChats:function(t,a){return e(w(t,a))}}}))(D),U=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return null===this.props.token?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",{className:"card-header msg_head"},r.a.createElement("div",{className:"d-flex bd-highlight"},r.a.createElement("div",{className:"img_cont"},r.a.createElement("img",{src:"http://emilcarlsson.se/assets/harveyspecter.png",alt:"",className:"rounded-circle user_img"}),r.a.createElement("span",{className:"online_icon"})),r.a.createElement("div",{className:"user_info"},r.a.createElement("span",null,this.props.username),r.a.createElement("p",null,"1767 Messages")),r.a.createElement("div",{className:"video_cam"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-video"})),r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-phone"})))),r.a.createElement("span",{id:"action_menu_btn"},r.a.createElement("i",{className:"fas fa-ellipsis-v"})),r.a.createElement("div",{className:"action_menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-user-circle"})," View profile"),r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-plus"})," Add to group"))))}}]),a}(r.a.Component),I=Object(p.b)((function(e){return{username:e.auth.username,token:e.auth.token}}))(U),M=a(379),F=a(108),R=a(378),H=a(380),L=a(54),q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={usernames:[],error:null},e.handleChange=function(t){e.setState({usernames:t})},e.handleFinish=function(t){var a=e.state.usernames,n=[].concat(Object(F.a)(a),[e.props.username]);g.a.defaults.headers={"Content-Type":"application/json",Authorization:"Token ".concat(e.props.token)},g.a.defaults.xsrfHeaderName="X-CSRFTOKEN",g.a.defaults.xsrfCookieName="csrftoken",g.a.post("http://127.0.0.1:8000/chat/create/",{messages:[],participants:n}).then((function(t){e.props.history.push("/".concat(t.data.id)),e.props.closeAddChatPopup(),e.props.getUserChats(e.props.username,e.props.token)})).catch((function(t){console.error(t),e.setState({error:t})}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(R.a,{layout:"inline",name:"username",rules:[{required:!0,message:"Please input the username of whom you want to chat with"}],onFinish:this.handleFinish},this.state.error?"".concat(this.state.error):null,r.a.createElement(R.a.Item,null,r.a.createElement(H.a,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:this.handleChange},[])),r.a.createElement(R.a.Item,null,r.a.createElement(L.a,{type:"primary",htmlType:"submit"},"Start a chat")))}}]),a}(r.a.Component),G=Object(h.h)(Object(p.b)((function(e){return{token:e.auth.token,username:e.auth.username}}),(function(e){return{closeAddChatPopup:function(){return e({type:"CLOSE_ADD_CHAT_POPUP"})},getUserChats:function(t,a){return e(w(t,a))}}}))(q)),W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(M.a,{centered:!0,footer:null,visible:this.props.isVisible,onCancel:this.props.close},r.a.createElement(G,null))}}]),a}(r.a.Component),J=a(377),z=a(382),V=r.a.createElement(z.a,{style:{fontSize:24},spin:!0}),$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).authenticate=function(t){t.preventDefault(),e.props.login(t.target.username.value,t.target.password.value)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"profile"},r.a.createElement("div",{className:"wrap"},null!==this.props.username?r.a.createElement("p",null,this.props.username):null,r.a.createElement("div",{id:"login"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"col-md-8 col-lg-6"},r.a.createElement("div",{className:"login d-flex align-items-center py-5"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 col-lg-8 mx-auto"},r.a.createElement("h2",{className:"login-heading mb-4 text-danger"},"Welcome back!"),this.props.loading?r.a.createElement(J.a,{indicator:V}):this.props.isAuthenticated?r.a.createElement("div",null,r.a.createElement(d.b,{to:"/chat"},r.a.createElement("button",{className:"btn btn-lg btn-danger btn-block btn-login text-uppercase font-weight-bold mb-2"},r.a.createElement("span",null,"Mingle"))),r.a.createElement(d.b,{to:"/profile"},r.a.createElement("button",{className:"btn btn-lg btn-danger btn-block btn-login text-uppercase font-weight-bold mb-2"},r.a.createElement("span",null,"Account Settings"))),r.a.createElement("button",{onClick:function(){return e.props.logout()},className:"btn btn-lg btn-danger btn-block btn-login text-uppercase font-weight-bold mb-2"},r.a.createElement("span",null,"Logout"))):r.a.createElement("form",{method:"POST",onSubmit:this.authenticate},r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"username",name:"username",id:"inputEmail",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}),r.a.createElement("label",{htmlFor:"inputEmail"},"Username")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"password",name:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),r.a.createElement("label",{htmlFor:"inputPassword"},"Password")),r.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),r.a.createElement("label",{className:"custom-control-label text-danger",htmlFor:"customCheck1"},"Remember password")),r.a.createElement("button",{className:"btn btn-lg btn-danger btn-block btn-login text-uppercase font-weight-bold mb-2",type:"submit"},"Log in"),r.a.createElement("div",{className:"text-center"},r.a.createElement("a",{className:"small",href:"#"},"Forgot password?")))))))))))))}}]),a}(r.a.Component),X=Object(p.b)((function(e){return{isAuthenticated:null!==e.auth.token,loading:e.auth.loading,token:e.auth.token,username:e.auth.username,chats:e.message.chats}}),(function(e){return{login:function(t,a){return e(N(t,a))},logout:function(){return e(v())},signup:function(t,a,n,r){return e(y(t,a,n,r))},addChat:function(){return e({type:"OPEN_ADD_CHAT_POPUP"})}}}))($),B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(X,null)}}]),a}(r.a.Component),K=r.a.createElement(z.a,{style:{fontSize:24},spin:!0}),Y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loginForm:!0},e.changeForm=function(){e.setState({loginForm:!e.state.loginForm})},e.authenticate=function(t){t.preventDefault(),e.props.signup(t.target.username.value,t.target.email.value,t.target.password.value,t.target.password2.value)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"profile"},r.a.createElement("div",{className:"wrap"},null!==this.props.username?r.a.createElement("p",null,this.props.username):null,r.a.createElement("div",{id:"registration"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"col-md-8 col-lg-6"},r.a.createElement("div",{className:"login d-flex align-items-center py-5"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 col-lg-8 mx-auto"},r.a.createElement("h3",{className:"login-heading mb-4 text-danger"},"Join Us!"),this.props.loading?r.a.createElement(J.a,{indicator:K}):this.props.isAuthenticated?r.a.createElement(d.b,{to:"/profile"},r.a.createElement("button",{className:"btn btn-lg btn-danger btn-block btn-login text-uppercase font-weight-bold mb-2"},r.a.createElement("span",null,"Set up Your Profile"))):r.a.createElement("form",{method:"POST",onSubmit:this.authenticate},r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"username",name:"username",id:"inputUsername",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}),r.a.createElement("label",{htmlFor:"inputUsername"},"Username")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"email",name:"email",id:"inputEmail",className:"form-control",placeholder:"Email",required:!0,autoFocus:!0}),r.a.createElement("label",{htmlFor:"inputEmail"},"Email")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"password",name:"password",id:"inputPassword",className:"form-control",placeholder:"Enter Password",required:!0}),r.a.createElement("label",{htmlFor:"inputPassword"},"Enter Password")),r.a.createElement("div",{className:"form-label-group"},r.a.createElement("input",{type:"password",name:"password2",id:"inputPassword2",className:"form-control",placeholder:"Confirm Password",required:!0}),r.a.createElement("label",{htmlFor:"inputPassword2"},"Confirm Password")),r.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},"Remember password")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-lg btn-danger btn-block btn-login text-uppercase font-weight-bold mb-2",type:"submit"},"Sign Up")))))))))))))}}]),a}(r.a.Component),Q=Object(p.b)((function(e){return{isAuthenticated:null!==e.auth.token,loading:e.auth.loading,token:e.auth.token,username:e.auth.username,chats:e.message.chats}}),(function(e){return{login:function(t,a){return e(N(t,a))},logout:function(){return e(v())},signup:function(t,a,n,r){return e(y(t,a,n,r))},addChat:function(){return e({type:"OPEN_ADD_CHAT_POPUP"})}}}))(Y),Z=a(184),ee=a.n(Z),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/register",className:"nav-link"},"Register"))),t=r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:" nav-link btn-sm btn-danger"},r.a.createElement("i",{className:"fa fa-cog fa-fw","aria-hidden":"true"})," ",r.a.createElement("span",null,"Settings"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:this.props.logout,className:"nav-link btn btn-outline-danger btn-sm text-dark"},"Logout")));return r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-light sticky-top"},r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement(d.b,{to:"/",className:"navbar-brand"},r.a.createElement("img",{src:ee.a,width:"70",height:"30",alt:""}))),this.props.isAuthenticated?t:e))}}]),a}(n.Component),ae=Object(p.b)((function(e){return{isAuthenticated:null!==e.auth.token,username:e.auth.username}}),(function(e){return{logout:function(){return e(v())}}}))(te),ne=a(381),re=a(383),se=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(le,null)}}]),a}(r.a.Component),ce={labelCol:{span:8},wrapperCol:{span:16}},oe={required:"${label} is required!",types:{email:"${label} is not validate email!",number:"${label} is not a validate number!"}},le=function(){return r.a.createElement(R.a,Object.assign({},ce,{name:"nest-messages",onFinish:function(e){console.log(e)},validateMessages:oe}),r.a.createElement(R.a.Item,{name:["user","name"],label:"Name",rules:[{required:!0}]},r.a.createElement(ne.a,null)),r.a.createElement(R.a.Item,{name:["user","email"],label:"Email",rules:[{type:"email"}]},r.a.createElement(ne.a,null)),r.a.createElement(R.a.Item,{name:["user","phone_number"],label:"phone_number",rules:[{type:"number"}]},r.a.createElement(re.a,null)),r.a.createElement(R.a.Item,{name:["user","website"],label:"Website"},r.a.createElement(ne.a,null)),r.a.createElement(R.a.Item,{name:["user","introduction"],label:"Introduction"},r.a.createElement(ne.a.TextArea,null)),r.a.createElement(R.a.Item,{wrapperCol:Object(O.a)(Object(O.a)({},ce.wrapperCol),{},{offset:8})},r.a.createElement(L.a,{type:"primary",htmlType:"submit"},"Submit")))},ie=se,ue=(a(372),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),S.addCallbacks(n.props.setMessages.bind(Object(l.a)(n)),n.props.addMessage.bind(Object(l.a)(n))),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}}]),Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(ae,null),r.a.createElement("div",{className:"container-fluid h-100"},r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/register"},r.a.createElement(Q,null)),r.a.createElement(h.b,{path:"/chat"},r.a.createElement("div",{className:"container-fluid row justify-content-center"},r.a.createElement(x,null),r.a.createElement("div",{className:"col-md-8 col-xl-6 chat"},r.a.createElement("div",{className:"card"},r.a.createElement(W,{isVisible:this.props.showAddChatPopup,close:this.props.closeAddChatPopup}),r.a.createElement(I,null),r.a.createElement(T,null))))),r.a.createElement(h.b,{path:"/profile"},r.a.createElement(ie,null)),r.a.createElement(h.b,{exact:!0,path:"/"},r.a.createElement(B,null)))))}}]),a}(r.a.Component)),me=Object(p.b)((function(e){return{showAddChatPopup:e.nav.showAddChatPopup,authenticated:e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("username");if(void 0===t)e(v());else{var n=new Date(localStorage.getItem("expirationDate"));n<=new Date?e(v()):(e(b(a,t)),e(k((n.getTime()-(new Date).getTime())/1e3)))}}))},closeAddChatPopup:function(){return e({type:"CLOSE_ADD_CHAT_POPUP"})},addMessage:function(t){return e(function(e){return{type:"ADD_MESSAGE",message:e}}(t))},setMessages:function(t){return e(function(e){return{type:"SET_MESSAGES",messages:e}}(t))}}}))(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(61),de=a(189),he=(a(373),a(374),function(e,t){return Object(O.a)(Object(O.a)({},e),t)}),fe={token:null,username:null,error:null,loading:!1},ge=function(e,t){return he(e,{error:null,loading:!0})},be=function(e,t){return he(e,{token:t.token,username:t.username,error:null,loading:!1})},Ee=function(e,t){return he(e,{error:t.error,loading:!1})},ve=function(e,t){return he(e,{token:null,username:null})},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return ge(e);case"AUTH_SUCCESS":return be(e,t);case"AUTH_FAIL":return Ee(e,t);case"AUTH_LOGOUT":return ve(e);default:return e}},Ne={showAddChatPopup:!1},ye=function(e,t){return he(e,{showAddChatPopup:!0})},we=function(e,t){return he(e,{showAddChatPopup:!1})},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_ADD_CHAT_POPUP":return ye(e);case"CLOSE_ADD_CHAT_POPUP":return we(e);default:return e}},Ce={messages:[],chats:[]},Se=function(e,t){return he(e,{messages:[].concat(Object(F.a)(e.messages),[t.message])})},je=function(e,t){return he(e,{messages:t.messages.reverse()})},_e=function(e,t){return he(e,{chats:t.chats})},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return Se(e,t);case"SET_MESSAGES":return je(e,t);case"GET_CHATS_SUCCESS":return _e(e,t);default:return e}},Te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pe.d;var Pe=function(){var e=Object(pe.c)({auth:ke,nav:Oe,message:Ae});return Object(pe.e)(e,Te(Object(pe.a)(de.a)))}();c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:Pe},r.a.createElement(me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[196,1,2]]]);
//# sourceMappingURL=main.41ba965a.chunk.js.map